{% extends 'base.html' %}

{% block cdns %}
<script src='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js'></script>
<link href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' rel='stylesheet' />
<link rel="stylesheet" href="/static/viewBusiness/viewBusiness.css">
{% endblock cdns %}

{% block title %}{% endblock title %}

{% block body %}

<div id="b-header">
    <img class="b-logo" src="/media/{{business.display_pic}}" alt="{{business.name}}">
    <div class="vfl-element {{theme}}" style="font-size: 40px;font-weight: 600;">
        {{business.name}}
    </div>
    <img class="b-logo converge" src="/media/{{business.display_pic}}" alt="{{business.name}}">
</div>
<div class="vfl-element {{theme}}" style="display:flex;justify-content:center;margin-top:20px;">
    <p class="b-desc">{{business.description}}</p>
</div>

<div id="business" class="carousel slide" data-bs-ride="carousel" style="display:flex;justify-content:center;">
    <div class="carousel-inner" style="display:flex;justify-content:center;width:50%;">
        {% for image in images %}
            <div class="carousel-item" style="margin-right:0;">
                <img src="/media/{{image.image}}" style="height:318px;" class="d-block w-100" alt="{{business.name}}">
            </div>
        {% endfor %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#business" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#business" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
</div>

<div id="map"></div>

<div class="modal fade" id="grantLocation" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="grantLocationLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="grantLocationLabel">Permission Required</h5>
                {% comment %} <button type="button" class="btn-close" data-bs-dismiss="modal"
                    aria-label="Close"></button> {% endcomment %}
            </div>
            <div class="modal-body">
                <p>As far as this website is concerned, we need access to your location to accurately determine which
                    stores are nearby your area and to provide you with the best of our services.</p>
                <p>We are not involved with any kind of third party applications and your location will not be forwarded
                    to any external sources.</p>
                <p>This is how you can grant us access to your location</p>
                <p>Method 1</p>
                <img src="/static/permission/permission.jpg" alt="Location Access">
                <p>Look at the top right of your browser, click on the location icon, select Allow and click Done</p>
                <p>Method 2</p>
                <p>Click on the i icon on the left side of website's name, toggle the location checkbox and reload the
                    website</p>
            </div>
            {% comment %} <div class="modal-footer"> {% endcomment %}
                {% comment %} <button type="button" class="btn btn-primary" data-bs-dismiss="modal">I
                    Understand</button> {% endcomment %}
                {% comment %} </div> {% endcomment %}
        </div>
    </div>
</div>

{% endblock body %}

{% block scripts %}
<script src="/static/viewBusiness/viewBusiness.js"></script>
<script>
    setter("{{token}}", "{{theme}}", "{{business.longitude}}", "{{business.latitude}}", "{{request.user.longitude}}", "{{request.user.latitude}}");
</script>
{% endblock scripts %}